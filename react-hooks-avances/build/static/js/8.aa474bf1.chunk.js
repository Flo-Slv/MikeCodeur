/*! For license information please see 8.aa474bf1.chunk.js.LICENSE.txt */
(this["webpackJsonp@mikecodeur/react-hooks-avances"]=this["webpackJsonp@mikecodeur/react-hooks-avances"]||[]).push([[8],{253:function(e,t,r){"use strict";r.r(t);var n=r(7),a=r(21),c=r(83),o=r(0),u=r(94),s=r(326),i=(r(327),r(324)),l=o.createContext();function d(e,t){var r=Date.now()+1e4;switch(t.type){case"ADD_MARVEL":return Object(c.a)(Object(c.a)({},e),{},Object(a.a)({},t.marvelName,{data:t.marvelData,expire:r}));case"ADD_MARVEL_LIST":return Object(c.a)(Object(c.a)({},e),{},Object(a.a)({},"".concat(t.marvelName,"-list"),{data:t.marvelData,expire:r}));default:throw new Error("action impossible: ".concat(t.type))}}function v(e){var t=o.useReducer(d,{}),r=Object(n.a)(t,2),a=r[0],u=r[1];return Object(i.jsx)(l.Provider,Object(c.a)({value:[a,u]},e))}function h(){var e=o.useContext(l);if(!e)throw new Error("useMarvelCache doit \xeatre utilis\xe9 avec MarvelCacheProvider");return e}var f=function(e,t){switch(t.type){case"fetching":return{status:"fetching",data:null,error:null};case"done":return{status:"done",data:t.payload,error:null};case"fail":return{status:"fail",data:null,error:t.error};default:throw new Error("Action non support\xe9")}};function j(){var e=o.useReducer(f,{data:null,error:null,status:"idle"}),t=Object(n.a)(e,2),r=t[0],a=t[1];return{data:r.data,error:r.error,status:r.status,execute:o.useCallback((function(e){a({type:"fetching"}),e.then((function(e){return a({type:"done",payload:e})})).catch((function(e){return a({type:"fail",error:e})}))}),[]),setData:o.useCallback((function(e){return a({type:"done",payload:e})}),[a])}}function m(e){var t=function(e){var t=h(),r=Object(n.a)(t,2),a=r[0],c=r[1],u=j(),i=u.data,l=u.error,d=u.status,v=u.execute,f=u.setData;return o.useEffect((function(){var t;e&&((null===(t=a[e])||void 0===t?void 0:t.data)&&Date.now()<a[e].expire?f(a[e].data):v(Object(s.d)(e).then((function(t){return c({type:"ADD_MARVEL",marvelName:e,marvelData:t}),t}))))}),[e,v,a,f,c]),{data:i,error:l,status:d}}(e.marvelName,s.e),r=t.data,a=t.error,c=t.status;if("fail"===c)throw a;return"idle"===c?"enter un nom de Marvel":"fetching"===c?"chargement en cours ...":"done"===c?Object(i.jsx)(s.b,{marvel:r}):void 0}function b(e){var t=function(e){var t=h(),r=Object(n.a)(t,2),a=r[0],c=r[1],u=j(),i=u.data,l=u.error,d=u.status,v=u.execute,f=u.setData;return o.useEffect((function(){var t;e&&((null===(t=a["".concat(e,"-list")])||void 0===t?void 0:t.data)&&Date.now()<a["".concat(e,"-list")].expire?f(a["".concat(e,"-list")].data):v(Object(s.f)(e).then((function(t){return c({type:"ADD_MARVEL_LIST",marvelName:e,marvelData:t}),t}))))}),[e,v,a,f,c]),{data:i,error:l,status:d}}(e.marvelName,s.e),r=t.data,a=t.error,c=t.status;if("fail"===c)throw a;return"idle"===c?"enter un nom de Marvel":"fetching"===c?"chargement en cours ...":"done"===c?Object(i.jsx)(i.Fragment,{children:r.map((function(e){return Object(i.jsxs)("div",{children:[Object(i.jsx)("hr",{style:{background:"grey"}}),Object(i.jsx)(s.b,{marvel:e})]},e.id)}))}):void 0}t.default=function(){var e=o.useState(""),t=Object(n.a)(e,2),r=t[0],a=t[1],c=o.useState(""),l=Object(n.a)(c,2),d=l[0],h=l[1];return Object(i.jsxs)("div",{className:"marvel-app",children:[Object(i.jsxs)("label",{children:[Object(i.jsx)("input",{type:"checkbox",checked:d,onChange:function(e){return h(e.target.checked)}})," ","Chercher une liste ?"]}),Object(i.jsx)(s.c,{marvelName:r,onSearch:function(e){a(e)}}),Object(i.jsx)(v,{children:Object(i.jsx)("div",{className:"marvel-detail",children:Object(i.jsx)(u.ErrorBoundary,{FallbackComponent:s.a,children:d?Object(i.jsx)(b,{marvelName:r}):Object(i.jsx)(m,{marvelName:r})},r)})})]})}},324:function(e,t,r){"use strict";e.exports=r(325)},325:function(e,t,r){"use strict";r(93);var n=r(0),a=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var c=Symbol.for;a=c("react.element"),t.Fragment=c("react.fragment")}var o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u=Object.prototype.hasOwnProperty,s={key:!0,ref:!0,__self:!0,__source:!0};function i(e,t,r){var n,c={},i=null,l=null;for(n in void 0!==r&&(i=""+r),void 0!==t.key&&(i=""+t.key),void 0!==t.ref&&(l=t.ref),t)u.call(t,n)&&!s.hasOwnProperty(n)&&(c[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===c[n]&&(c[n]=t[n]);return{$$typeof:a,type:e,key:i,ref:l,props:c,_owner:o.current}}t.jsx=i,t.jsxs=i},326:function(e,t,r){"use strict";r.d(t,"b",(function(){return d})),r.d(t,"c",(function(){return v})),r.d(t,"d",(function(){return s})),r.d(t,"a",(function(){return h})),r.d(t,"e",(function(){return i})),r.d(t,"f",(function(){return l}));var n=r(7),a=r(0),c=r(324),o="5a4bd353e754599ed13518c2f87509df",u={method:"GET",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded"}),mode:"cors"},s=function(e){var t="https://gateway.marvel.com:443/v1/public/characters?apikey=".concat(o,"&nameStartsWith=").concat(e);return fetch(t,u).then((function(e){return e.json()})).then((function(t){return t.data.results.length>0?t.data.results[0]:Promise.reject(new Error('Aucun Marvel trouv\xe9 avec le nom "'.concat(e,'"')))})).catch((function(t){return Promise.reject(new Error('Aucun Marvel trouv\xe9 avec le nom "'.concat(e,'"')))}))},i=function(e){var t="https://gateway.marvel.com:443/v1/public/characters/".concat(e,"?apikey=").concat(o);return fetch(t,u).then((function(e){return e.json()})).then((function(t){return t.data.results.length>0?t.data.results[0]:Promise.reject(new Error("Aucun Marvel trouv\xe9 avec l'id \"".concat(e,'"')))})).catch((function(t){return Promise.reject(new Error("Aucun Marvel trouv\xe9 avec l'id \"".concat(e,'"')))}))},l=function(e){var t="https://gateway.marvel.com:443/v1/public/characters?apikey=".concat(o,"&nameStartsWith=").concat(e);return fetch(t,u).then((function(e){return e.json()})).then((function(t){return t.data.results.length>0?t.data.results:Promise.reject(new Error('Aucun Marvel trouv\xe9 avec le nom "'.concat(e,'"')))})).catch((function(t){return Promise.reject(new Error('Aucun Marvel trouv\xe9 avec le nom "'.concat(e,'"')))}))};function d(e){var t=e.marvel;return Object(c.jsxs)("div",{children:[Object(c.jsx)("div",{className:"marvel-img",children:Object(c.jsx)("img",{height:"400",src:t.thumbnail.path+"."+t.thumbnail.extension,alt:t.name})}),Object(c.jsx)("div",{className:"marvel-name",children:Object(c.jsxs)("h1",{children:[t.name,Object(c.jsx)("sup",{children:t.number})]})}),Object(c.jsxs)("div",{className:"marvel-wrapper",children:[Object(c.jsx)("h3",{children:"Apparait dans"}),Object(c.jsx)("ul",{children:t.series.items.map((function(e,t){return Object(c.jsxs)("li",{children:[Object(c.jsx)("label",{children:e.name}),":"," "]},t)}))})]})]})}function v(e){var t=e.onSearch,r=e.marvelName,o=a.useState(r),u=Object(n.a)(o,2),s=u[0],i=u[1];return Object(c.jsxs)("div",{className:"component-header",children:[Object(c.jsxs)("div",{children:["Recherche Marvel (",Object(c.jsx)("span",{onClick:function(e){return i("x-men")},children:"x-men"}),","," ",Object(c.jsx)("span",{onClick:function(e){return i("spider-man")},children:"spider-man"})," ...)"]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("input",{type:"text",value:s,onChange:function(e){return i(e.target.value)}}),Object(c.jsx)("input",{type:"button",onClick:function(){return t(s)},value:"rechercher"})]})]})}function h(e){var t=e.error;return Object(c.jsxs)("div",{style:{color:"red"},children:["Une erreur est survenue lors de la recherche de Marvel detail :"," ",Object(c.jsxs)("pre",{style:{color:"grey"},children:[" D\xe9tail : ",t.message]})]})}},327:function(e,t,r){}}]);
//# sourceMappingURL=8.aa474bf1.chunk.js.map