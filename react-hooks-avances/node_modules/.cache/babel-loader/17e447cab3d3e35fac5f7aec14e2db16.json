{"ast":null,"code":"import _slicedToArray from\"/home/floslv/Flo/Dev/Learning/MikeCodeur/react-hooks-avances/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/* NE PAS MODIFIER CE FICHIER  */ /* eslint-disable no-unused-vars */import*as React from'react';// GET FREE KEY https://developer.marvel.com/account\n// add localhost to referrers\n// clef limité à 3000 appels par jour\n// const marvelApiKey = '6bcc5c7ff0ad488fb58f759c4069964c'\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var marvelApiKey='5a4bd353e754599ed13518c2f87509df';var myHeader=new Headers({'Content-Type':'application/x-www-form-urlencoded'});var init={method:'GET',headers:myHeader,mode:'cors'};var fetchMarvel=function fetchMarvel(name){var url=\"https://gateway.marvel.com:443/v1/public/characters?apikey=\".concat(marvelApiKey,\"&nameStartsWith=\").concat(name);return fetch(url,init).then(function(response){return response.json();}).then(function(json){if(json.data.results.length>0){return json.data.results[0];}else{return Promise.reject(new Error(\"Aucun Marvel trouv\\xE9 avec le nom \\\"\".concat(name,\"\\\"\")));}// ERROR DU JSON()\n})[\"catch\"](function(error){return Promise.reject(new Error(\"Aucun Marvel trouv\\xE9 avec le nom \\\"\".concat(name,\"\\\"\")));});// ERROR APPEL API\n};var fetchMarvelById=function fetchMarvelById(id){var url=\"https://gateway.marvel.com:443/v1/public/characters/\".concat(id,\"?apikey=\").concat(marvelApiKey);return fetch(url,init).then(function(response){return response.json();}).then(function(json){if(json.data.results.length>0){return json.data.results[0];}else{return Promise.reject(new Error(\"Aucun Marvel trouv\\xE9 avec l'id \\\"\".concat(id,\"\\\"\")));}// ERROR DU JSON()\n})[\"catch\"](function(error){return Promise.reject(new Error(\"Aucun Marvel trouv\\xE9 avec l'id \\\"\".concat(id,\"\\\"\")));});// ERROR APPEL API\n};var fetchMarvelsList=function fetchMarvelsList(name){var url=\"https://gateway.marvel.com:443/v1/public/characters?apikey=\".concat(marvelApiKey,\"&nameStartsWith=\").concat(name);return fetch(url,init).then(function(response){return response.json();}).then(function(json){if(json.data.results.length>0){return json.data.results;}else{return Promise.reject(new Error(\"Aucun Marvel trouv\\xE9 avec le nom \\\"\".concat(name,\"\\\"\")));}// ERROR DU JSON()\n})[\"catch\"](function(error){return Promise.reject(new Error(\"Aucun Marvel trouv\\xE9 avec le nom \\\"\".concat(name,\"\\\"\")));});// ERROR APPEL API\n};function MarvelPersoView(_ref){var marvel=_ref.marvel;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"marvel-img\",children:/*#__PURE__*/_jsx(\"img\",{height:\"400\",src:marvel.thumbnail.path+'.'+marvel.thumbnail.extension,alt:marvel.name})}),/*#__PURE__*/_jsx(\"div\",{className:\"marvel-name\",children:/*#__PURE__*/_jsxs(\"h1\",{children:[marvel.name,/*#__PURE__*/_jsx(\"sup\",{children:marvel.number})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"marvel-wrapper\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Apparait dans\"}),/*#__PURE__*/_jsx(\"ul\",{children:marvel.series.items.map(function(serie,idx){return/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"label\",{children:serie.name}),\":\",' ']},idx);})})]})]});}function MarvelSearchForm(_ref2){var onSearch=_ref2.onSearch,marvelName=_ref2.marvelName;var _React$useState=React.useState(marvelName),_React$useState2=_slicedToArray(_React$useState,2),name=_React$useState2[0],setName=_React$useState2[1];return/*#__PURE__*/_jsxs(\"div\",{className:\"component-header\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"Recherche Marvel (\",/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(e){return setName('x-men');},children:\"x-men\"}),\",\",' ',/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(e){return setName('spider-man');},children:\"spider-man\"}),\" ...)\"]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:name,onChange:function onChange(e){return setName(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"button\",onClick:function onClick(){return onSearch(name);},value:'rechercher'})]})]});}function ErrorDisplay(_ref3){var error=_ref3.error;return/*#__PURE__*/_jsxs(\"div\",{style:{color:'red'},children:[\"Une erreur est survenue lors de la recherche de Marvel detail :\",' ',/*#__PURE__*/_jsxs(\"pre\",{style:{color:'grey'},children:[\" D\\xE9tail : \",error.message]})]});}export{MarvelPersoView,MarvelSearchForm,fetchMarvel,ErrorDisplay,fetchMarvelById,fetchMarvelsList};","map":{"version":3,"sources":["/home/floslv/Flo/Dev/Learning/MikeCodeur/react-hooks-avances/src/marvel.js"],"names":["React","marvelApiKey","myHeader","Headers","init","method","headers","mode","fetchMarvel","name","url","fetch","then","response","json","data","results","length","Promise","reject","Error","error","fetchMarvelById","id","fetchMarvelsList","MarvelPersoView","marvel","thumbnail","path","extension","number","series","items","map","serie","idx","MarvelSearchForm","onSearch","marvelName","useState","setName","e","target","value","ErrorDisplay","color","message"],"mappings":"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","sourcesContent":["/* NE PAS MODIFIER CE FICHIER  */\n/* eslint-disable no-unused-vars */\nimport * as React from 'react'\n\n// GET FREE KEY https://developer.marvel.com/account\n// add localhost to referrers\n// clef limité à 3000 appels par jour\n\n// const marvelApiKey = '6bcc5c7ff0ad488fb58f759c4069964c'\nconst marvelApiKey = '5a4bd353e754599ed13518c2f87509df'\n\nconst myHeader = new Headers({\n  'Content-Type': 'application/x-www-form-urlencoded',\n})\nconst init = {\n  method: 'GET',\n  headers: myHeader,\n  mode: 'cors',\n}\n\nconst fetchMarvel = name => {\n  const url = `https://gateway.marvel.com:443/v1/public/characters?apikey=${marvelApiKey}&nameStartsWith=${name}`\n  return fetch(url, init)\n    .then(response => response.json())\n    .then(json => {\n      if (json.data.results.length > 0) {\n        return json.data.results[0]\n      } else {\n        return Promise.reject(\n          new Error(`Aucun Marvel trouvé avec le nom \"${name}\"`),\n        )\n      } // ERROR DU JSON()\n    })\n    .catch(error => {\n      return Promise.reject(\n        new Error(`Aucun Marvel trouvé avec le nom \"${name}\"`),\n      )\n    }) // ERROR APPEL API\n}\n\nconst fetchMarvelById = id => {\n  const url = `https://gateway.marvel.com:443/v1/public/characters/${id}?apikey=${marvelApiKey}`\n  return fetch(url, init)\n    .then(response => response.json())\n    .then(json => {\n      if (json.data.results.length > 0) {\n        return json.data.results[0]\n      } else {\n        return Promise.reject(\n          new Error(`Aucun Marvel trouvé avec l'id \"${id}\"`),\n        )\n      } // ERROR DU JSON()\n    })\n    .catch(error => {\n      return Promise.reject(new Error(`Aucun Marvel trouvé avec l'id \"${id}\"`))\n    }) // ERROR APPEL API\n}\n\nconst fetchMarvelsList = name => {\n  const url = `https://gateway.marvel.com:443/v1/public/characters?apikey=${marvelApiKey}&nameStartsWith=${name}`\n  return fetch(url, init)\n    .then(response => response.json())\n    .then(json => {\n      if (json.data.results.length > 0) {\n        return json.data.results\n      } else {\n        return Promise.reject(\n          new Error(`Aucun Marvel trouvé avec le nom \"${name}\"`),\n        )\n      } // ERROR DU JSON()\n    })\n    .catch(error => {\n      return Promise.reject(\n        new Error(`Aucun Marvel trouvé avec le nom \"${name}\"`),\n      )\n    }) // ERROR APPEL API\n}\n\nfunction MarvelPersoView({marvel}) {\n  return (\n    <div>\n      <div className=\"marvel-img\">\n        <img\n          height=\"400\"\n          src={marvel.thumbnail.path + '.' + marvel.thumbnail.extension}\n          alt={marvel.name}\n        />\n      </div>\n      <div className=\"marvel-name\">\n        <h1>\n          {marvel.name}\n          <sup>{marvel.number}</sup>\n        </h1>\n      </div>\n      <div className=\"marvel-wrapper\">\n        <h3>Apparait dans</h3>\n        <ul>\n          {marvel.series.items.map((serie, idx) => (\n            <li key={idx}>\n              <label>{serie.name}</label>:{' '}\n            </li>\n          ))}\n        </ul>\n      </div>\n    </div>\n  )\n}\n\nfunction MarvelSearchForm({onSearch, marvelName}) {\n  const [name, setName] = React.useState(marvelName)\n  return (\n    <div className=\"component-header\">\n      <div>\n        Recherche Marvel (<span onClick={e => setName('x-men')}>x-men</span>,{' '}\n        <span onClick={e => setName('spider-man')}>spider-man</span> ...)\n      </div>\n      <div>\n        <input\n          type=\"text\"\n          value={name}\n          onChange={e => setName(e.target.value)}\n        />\n        <input\n          type=\"button\"\n          onClick={() => onSearch(name)}\n          value={'rechercher'}\n        />\n      </div>\n    </div>\n  )\n}\n\nfunction ErrorDisplay({error}) {\n  return (\n    <div style={{color: 'red'}}>\n      Une erreur est survenue lors de la recherche de Marvel detail :{' '}\n      <pre style={{color: 'grey'}}> Détail : {error.message}</pre>\n    </div>\n  )\n}\n\nexport {\n  MarvelPersoView,\n  MarvelSearchForm,\n  fetchMarvel,\n  ErrorDisplay,\n  fetchMarvelById,\n  fetchMarvelsList,\n}\n"]},"metadata":{},"sourceType":"module"}