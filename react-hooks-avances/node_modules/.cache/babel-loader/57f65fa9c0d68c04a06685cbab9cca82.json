{"ast":null,"code":"import _slicedToArray from\"/home/floslv/Flo/Dev/Learning/MikeCodeur/react-hooks-avances/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";// Hook personnalisÃ©\n// ðŸš€ Type d'action et payload\n// http://localhost:3000/alone/final/02.bonus-3.js\nimport*as React from'react';import{ErrorBoundary}from'react-error-boundary';import{fetchMarvel,MarvelSearchForm,ErrorDisplay,MarvelPersoView}from'../marvel';import'../02-styles.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var reducer=function reducer(state,action){switch(action.type){case'fetching':return{marvel:null,error:null};case'done':return{marvel:action.payload,error:null};case'fail':return{marvel:null,error:action.error};default:throw new Error('Action non supportÃ©');}};function useFindMarvelByName(marvelName){var _React$useReducer=React.useReducer(reducer,{marvel:null,error:null}),_React$useReducer2=_slicedToArray(_React$useReducer,2),state=_React$useReducer2[0],dispatch=_React$useReducer2[1];React.useEffect(function(){if(!marvelName){return;}dispatch({type:'fetching'});fetchMarvel(marvelName).then(function(marvel){return dispatch({type:'done',payload:marvel});})[\"catch\"](function(error){return dispatch({type:'fail',error:error});});},[marvelName]);return state;}function Marvel(_ref){var marvelName=_ref.marvelName;var state=useFindMarvelByName(marvelName);var error=state.error,marvel=state.marvel;if(error){throw error;}return/*#__PURE__*/_jsxs(\"div\",{children:[' ',marvel?/*#__PURE__*/_jsx(MarvelPersoView,{marvel:marvel}):\"Le marvel n'existe pas\"]});}function App(){var _React$useState=React.useState(''),_React$useState2=_slicedToArray(_React$useState,2),marvelName=_React$useState2[0],setMarvelName=_React$useState2[1];var handleSearch=function handleSearch(name){setMarvelName(name);};return/*#__PURE__*/_jsxs(\"div\",{className:\"marvel-app\",children:[/*#__PURE__*/_jsx(MarvelSearchForm,{marvelName:marvelName,onSearch:handleSearch}),/*#__PURE__*/_jsx(\"div\",{className:\"marvel-detail\",children:/*#__PURE__*/_jsx(ErrorBoundary,{FallbackComponent:ErrorDisplay,children:/*#__PURE__*/_jsx(Marvel,{marvelName:marvelName})},marvelName)})]});}export default App;","map":{"version":3,"sources":["/home/floslv/Flo/Dev/Learning/MikeCodeur/react-hooks-avances/src/final/02.bonus-3.js"],"names":["React","ErrorBoundary","fetchMarvel","MarvelSearchForm","ErrorDisplay","MarvelPersoView","reducer","state","action","type","marvel","error","payload","Error","useFindMarvelByName","marvelName","useReducer","dispatch","useEffect","then","Marvel","App","useState","setMarvelName","handleSearch","name"],"mappings":"mLAAA;AACA;AACA;AAEA,MAAO,GAAKA,CAAAA,KAAZ,KAAuB,OAAvB,CACA,OAAQC,aAAR,KAA4B,sBAA5B,CACA,OACEC,WADF,CAEEC,gBAFF,CAGEC,YAHF,CAIEC,eAJF,KAKO,WALP,CAMA,MAAO,kBAAP,C,wFAEA,GAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,CAACC,KAAD,CAAQC,MAAR,CAAmB,CACjC,OAAQA,MAAM,CAACC,IAAf,EACE,IAAK,UAAL,CACE,MAAO,CAACC,MAAM,CAAE,IAAT,CAAeC,KAAK,CAAE,IAAtB,CAAP,CACF,IAAK,MAAL,CACE,MAAO,CAACD,MAAM,CAAEF,MAAM,CAACI,OAAhB,CAAyBD,KAAK,CAAE,IAAhC,CAAP,CACF,IAAK,MAAL,CACE,MAAO,CAACD,MAAM,CAAE,IAAT,CAAeC,KAAK,CAAEH,MAAM,CAACG,KAA7B,CAAP,CACF,QACE,KAAM,IAAIE,CAAAA,KAAJ,CAAU,qBAAV,CAAN,CARJ,CAUD,CAXD,CAaA,QAASC,CAAAA,mBAAT,CAA6BC,UAA7B,CAAyC,CACvC,sBAA0Bf,KAAK,CAACgB,UAAN,CAAiBV,OAAjB,CAA0B,CAClDI,MAAM,CAAE,IAD0C,CAElDC,KAAK,CAAE,IAF2C,CAA1B,CAA1B,wDAAOJ,KAAP,uBAAcU,QAAd,uBAKAjB,KAAK,CAACkB,SAAN,CAAgB,UAAM,CACpB,GAAI,CAACH,UAAL,CAAiB,CACf,OACD,CACDE,QAAQ,CAAC,CAACR,IAAI,CAAE,UAAP,CAAD,CAAR,CACAP,WAAW,CAACa,UAAD,CAAX,CACGI,IADH,CACQ,SAAAT,MAAM,QAAIO,CAAAA,QAAQ,CAAC,CAACR,IAAI,CAAE,MAAP,CAAeG,OAAO,CAAEF,MAAxB,CAAD,CAAZ,EADd,WAES,SAAAC,KAAK,QAAIM,CAAAA,QAAQ,CAAC,CAACR,IAAI,CAAE,MAAP,CAAeE,KAAK,CAALA,KAAf,CAAD,CAAZ,EAFd,EAGD,CARD,CAQG,CAACI,UAAD,CARH,EAUA,MAAOR,CAAAA,KAAP,CACD,CAED,QAASa,CAAAA,MAAT,MAA8B,IAAbL,CAAAA,UAAa,MAAbA,UAAa,CAC5B,GAAMR,CAAAA,KAAK,CAAGO,mBAAmB,CAACC,UAAD,CAAjC,CACA,GAAOJ,CAAAA,KAAP,CAAwBJ,KAAxB,CAAOI,KAAP,CAAcD,MAAd,CAAwBH,KAAxB,CAAcG,MAAd,CACA,GAAIC,KAAJ,CAAW,CACT,KAAMA,CAAAA,KAAN,CACD,CACD,mBACE,uBACG,GADH,CAEGD,MAAM,cAAG,KAAC,eAAD,EAAiB,MAAM,CAAEA,MAAzB,EAAH,yBAFT,GADF,CAMD,CACD,QAASW,CAAAA,GAAT,EAAe,CACb,oBAAoCrB,KAAK,CAACsB,QAAN,CAAe,EAAf,CAApC,oDAAOP,UAAP,qBAAmBQ,aAAnB,qBACA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAAAC,IAAI,CAAI,CAC3BF,aAAa,CAACE,IAAD,CAAb,CACD,CAFD,CAGA,mBACE,aAAK,SAAS,CAAC,YAAf,wBACE,KAAC,gBAAD,EAAkB,UAAU,CAAEV,UAA9B,CAA0C,QAAQ,CAAES,YAApD,EADF,cAEE,YAAK,SAAS,CAAC,eAAf,uBACE,KAAC,aAAD,EAAgC,iBAAiB,CAAEpB,YAAnD,uBACE,KAAC,MAAD,EAAQ,UAAU,CAAEW,UAApB,EADF,EAAoBA,UAApB,CADF,EAFF,GADF,CAUD,CAED,cAAeM,CAAAA,GAAf","sourcesContent":["// Hook personnalisÃ©\n// ðŸš€ Type d'action et payload\n// http://localhost:3000/alone/final/02.bonus-3.js\n\nimport * as React from 'react'\nimport {ErrorBoundary} from 'react-error-boundary'\nimport {\n  fetchMarvel,\n  MarvelSearchForm,\n  ErrorDisplay,\n  MarvelPersoView,\n} from '../marvel'\nimport '../02-styles.css'\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case 'fetching':\n      return {marvel: null, error: null}\n    case 'done':\n      return {marvel: action.payload, error: null}\n    case 'fail':\n      return {marvel: null, error: action.error}\n    default:\n      throw new Error('Action non supportÃ©')\n  }\n}\n\nfunction useFindMarvelByName(marvelName) {\n  const [state, dispatch] = React.useReducer(reducer, {\n    marvel: null,\n    error: null,\n  })\n\n  React.useEffect(() => {\n    if (!marvelName) {\n      return\n    }\n    dispatch({type: 'fetching'})\n    fetchMarvel(marvelName)\n      .then(marvel => dispatch({type: 'done', payload: marvel}))\n      .catch(error => dispatch({type: 'fail', error}))\n  }, [marvelName])\n\n  return state\n}\n\nfunction Marvel({marvelName}) {\n  const state = useFindMarvelByName(marvelName)\n  const {error, marvel} = state\n  if (error) {\n    throw error\n  }\n  return (\n    <div>\n      {' '}\n      {marvel ? <MarvelPersoView marvel={marvel} /> : `Le marvel n'existe pas`}\n    </div>\n  )\n}\nfunction App() {\n  const [marvelName, setMarvelName] = React.useState('')\n  const handleSearch = name => {\n    setMarvelName(name)\n  }\n  return (\n    <div className=\"marvel-app\">\n      <MarvelSearchForm marvelName={marvelName} onSearch={handleSearch} />\n      <div className=\"marvel-detail\">\n        <ErrorBoundary key={marvelName} FallbackComponent={ErrorDisplay}>\n          <Marvel marvelName={marvelName} />\n        </ErrorBoundary>\n      </div>\n    </div>\n  )\n}\n\nexport default App\n"]},"metadata":{},"sourceType":"module"}