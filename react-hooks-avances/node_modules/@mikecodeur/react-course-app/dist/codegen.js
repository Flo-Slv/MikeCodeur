"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getCode = getCode;

var _getAppInfo = require("./utils/getAppInfo");

// this generates the code to use in the entry file
function getCode({
  cwd = process.cwd(),
  options
} = {}) {
  const {
    gitHubRepoUrl,
    filesInfo,
    hasBackend,
    imports
  } = (0, _getAppInfo.getAppInfo)({
    cwd
  });
  return `
import {makeMCRCourseApp} from '@mikecodeur/react-course-app'
import pkg from '../package.json'
${hasBackend ? `import * as backend from './backend'` : ''}

if (module.hot) module.hot.accept()

const filesInfo = ${JSON.stringify(filesInfo, null, 2)}


  makeMCRCourseApp({
    imports: {
      ${imports.join(',\n      ')}
    },
    filesInfo,
    projectTitle: pkg.title,
    gitHubRepoUrl: \`${gitHubRepoUrl}\`,
    ${hasBackend ? `backend,` : ''}
    ${options ? `options: ${JSON.stringify(options)},` : ''}
  })
`.trim();
}